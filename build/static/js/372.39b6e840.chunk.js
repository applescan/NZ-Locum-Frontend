"use strict";(self.webpackChunknz_vet_locum_network=self.webpackChunknz_vet_locum_network||[]).push([[372],{1723:function(e,l,t){t(2791);var s=t(9653),n=t(7052),i=t(930),a=t(184);l.Z=function(e){var l=e.show,t=e.handleClose,r=(e.handleShow,e.handleChanges),c=e.nameClose,d=e.nameOpen;return(0,a.jsx)("div",{children:(0,a.jsxs)(s.Z,{centered:!0,show:l,onHide:t,children:[(0,a.jsx)(s.Z.Header,{closeButton:!0,children:(0,a.jsx)(s.Z.Title,{children:e.title})}),(0,a.jsx)(s.Z.Body,{children:e.text}),(0,a.jsxs)(s.Z.Footer,{children:[(0,a.jsx)(n.Z,{onClick:t,name:c}),(0,a.jsx)(i.Z,{onClick:r,name:d,size:"sml"})]})]})})}},5372:function(e,l,t){t.r(l),t.d(l,{default:function(){return W}});var s=t(4165),n=t(5861),i=t(9439),a=t(2791),r=t(7107),c=t(7012),d=t(2187),o=t(7689),u=t(6983),m=t(5474),h=t(8804),x=t(930),p=t(7052),j=t(4708),f=t(7391),Z=t(1889),w=t(4554),g=t(1614),y=t(2388),v=t(1723),b=t(1054),P=t(2144),_=t(4925),C=t(9891),k=t(9694),T=t(8096),N=t(317),K=t(184),S=(0,r.Z)();function W(){var e=a.useRef(),l=(0,o.s0)(),t=(0,a.useContext)(d.D),r=t.user,W=t.setUser,D=(0,a.useContext)(d.D),q=D.currentUserInfo,z=D.setCurrentUserInfo,V=a.useState(!1),F=(0,i.Z)(V,2),A=F[0],I=F[1],U=(0,a.useState)(!1),Y=(0,i.Z)(U,2),E=Y[0],H=Y[1],R=function(){return H(!0)},B=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y.Z.delete("https://www.nz-vet-locum.online/doctors/delete/".concat(r._id));case 4:localStorage.clear(),z({}),l("/"),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(l){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));if(e){W(e);var l=function(){var l=(0,n.Z)((0,s.Z)().mark((function l(){var t;return(0,s.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,y.Z.get("https://www.nz-vet-locum.online/doctors/search/".concat(e._id));case 2:t=l.sent,z(t.data.currentUserInfo[0]),console.log(t.data.currentUserInfo[0]);case 5:case"end":return l.stop()}}),l)})));return function(){return l.apply(this,arguments)}}();l()}}),[]);var L=(0,a.useState)(null),O=(0,i.Z)(L,2),M=O[0],Q=O[1],J=(0,a.useState)(!1),G=(0,i.Z)(J,2),X=G[0],$=G[1];return!0===X||r&&!q?(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(N.Z,{})}):r&&q?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(u.Z,{maoriTitle:"T\u014d K\u014dtaha",englishTitle:"Your Profile",background:m}),(0,K.jsxs)("section",{children:[(0,K.jsx)(h.L5,{className:"py-5",children:(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{lg:"4",children:(0,K.jsx)(h.Yl,{className:"mb-4",children:(0,K.jsxs)(h.H7,{className:"text-center",children:[(0,K.jsx)(h.PH,{src:"https://www.nz-vet-locum.online/images/".concat(q.imageKey),alt:"avatar",className:"rounded",style:{width:"200px",height:"200px",objectFit:"cover"},fluid:!0}),(0,K.jsx)("br",{}),(0,K.jsx)("br",{}),(0,K.jsxs)("h3",{children:["Dr. ",q.first_name," ",q.last_name]}),(0,K.jsxs)("p",{className:"text-muted mb-4",children:[q.city,", New Zealand"]})]})})}),(0,K.jsxs)(h.TK,{lg:"8",children:[(0,K.jsx)(h.Yl,{className:"mb-4",children:(0,K.jsxs)(h.H7,{children:[(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{sm:"3",children:(0,K.jsx)(h.Pp,{children:"Full Name"})}),(0,K.jsx)(h.TK,{sm:"9",children:(0,K.jsxs)(h.Pp,{className:"text-muted",children:[q.first_name," ",q.last_name]})})]}),(0,K.jsx)("hr",{}),(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{sm:"3",children:(0,K.jsx)(h.Pp,{children:"Email"})}),(0,K.jsx)(h.TK,{sm:"9",children:(0,K.jsx)(h.Pp,{className:"text-muted",children:q.email})})]}),(0,K.jsx)("hr",{}),(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{sm:"3",children:(0,K.jsx)(h.Pp,{children:"Phone"})}),(0,K.jsx)(h.TK,{sm:"9",children:(0,K.jsx)(h.Pp,{className:"text-muted",children:q.phone})})]}),(0,K.jsx)("hr",{}),(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{sm:"3",children:(0,K.jsx)(h.Pp,{children:"Specialities"})}),(0,K.jsx)(h.TK,{sm:"9",children:(0,K.jsx)(h.Pp,{className:"text-muted",children:q.specialities})})]}),(0,K.jsx)("hr",{}),(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{sm:"3",children:(0,K.jsx)(h.Pp,{children:"License"})}),(0,K.jsx)(h.TK,{sm:"9",children:(0,K.jsx)(h.Pp,{className:"text-muted",children:q.license})})]}),(0,K.jsx)("hr",{}),(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{sm:"3",children:(0,K.jsx)(h.Pp,{children:"Availability"})}),(0,K.jsx)(h.TK,{sm:"9",children:(0,K.jsx)(h.Pp,{className:"text-muted",children:q.availability})})]}),(0,K.jsx)("hr",{}),(0,K.jsxs)(h.uZ,{children:[(0,K.jsx)(h.TK,{sm:"3",children:(0,K.jsx)(h.Pp,{children:"Work Requirement"})}),(0,K.jsx)(h.TK,{sm:"9",children:(0,K.jsx)(h.Pp,{className:"text-muted",children:q.work_requirement})})]})]})}),(0,K.jsx)(x.Z,{name:"Edit Details",style:{marginRight:30},onClick:function(){I(!A)},size:"sml"}),(0,K.jsx)(p.Z,{name:"Delete Profile",style:{marginRight:30},onClick:function(){return R()},size:"sml"}),(0,K.jsx)(v.Z,{show:E,handleClose:function(){return H(!1)},handleShow:R,handleChanges:B,nameClose:"Cancel",nameOpen:"Delete Profile",title:"We are sad to see you go! \ud83d\ude14",text:"Are you sure you want to delete your profile? You can not undo this action"})]})]})}),A&&(0,K.jsx)(c.Z,{theme:S,children:(0,K.jsxs)(g.Z,{component:"main",children:[(0,K.jsx)(j.ZP,{}),(0,K.jsxs)(w.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"left",textAlign:"left"},children:[(0,K.jsx)("h3",{children:"Edit Your Details"}),(0,K.jsxs)(w.Z,{component:"form",noValidate:!0,onSubmit:function(l){l.preventDefault(),Q(null),$(!0);var t=new FormData(l.currentTarget),s=null==t.get("first_name")?q.first_name:t.get("first_name"),n=null==t.get("last_name")?q.last_name:t.get("last_name"),i=null==t.get("email")?q.email:t.get("email"),a=null==t.get("password")?q.password:t.get("password"),c=null==t.get("specialities")?q.specialities:t.get("specialities"),d=null==t.get("phone")?q.phone:t.get("phone"),o=null==t.get("city")?q.city:t.get("city"),u=null==t.get("license")?q.license:t.get("license"),m=null==t.get("availability")?q.availability:t.get("availability"),h=null==t.get("work_requirement")?q.work_requirement:t.get("work_requirement"),x=null==e.current.files[0]?q.imageKey:e.current.files[0],p=new FormData;p.append("first_name",s),p.append("last_name",n),p.append("email",i),p.append("password",a),p.append("specialities",c),p.append("phone",d),p.append("city",o),p.append("license",u),p.append("availability",m),p.append("work_requirement",h),p.append("imageKey",x);try{fetch("https://www.nz-vet-locum.online/doctors/update/".concat(r._id),{method:"POST",body:p}).then((function(){window.location.reload()})).catch((function(e){return Q(e)}))}catch(M){console.log(M.msg),$(!1)}},sx:{mt:3},children:[M?(0,K.jsx)("h1",{children:M.toString()}):null,(0,K.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(P.Z,{children:(0,K.jsxs)("div",{id:"cards",children:[(0,K.jsx)("input",{ref:e,type:"file"}),(0,K.jsx)("div",{className:"small text-muted mt-2",children:"Upload your profile picture. Max file size 5 MB"})]})})}),(0,K.jsx)("br",{}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,K.jsx)(f.Z,{autoComplete:"first_name",name:"first_name",fullWidth:!0,id:"first_name",label:"First Name",autoFocus:!0,defaultValue:q.first_name})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,K.jsx)(f.Z,{fullWidth:!0,id:"last_name",label:"Last Name",name:"last_name",autoComplete:"family-name",defaultValue:q.last_name})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(f.Z,{fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",defaultValue:q.email})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(f.Z,{fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",placeholder:"Your password"})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(f.Z,{fullWidth:!0,name:"phone",label:"Phone",type:"number",id:"phone",autoComplete:"new-phone",defaultValue:q.phone})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,K.jsxs)(T.Z,{fullWidth:!0,children:[(0,K.jsx)(_.Z,{id:"city",children:"City*"}),(0,K.jsxs)(k.Z,{labelId:"city",id:"city",name:"city",label:"City",required:!0,defaultValue:q.city,children:[(0,K.jsx)(C.Z,{value:"Northland",children:"Northland"}),(0,K.jsx)(C.Z,{value:"Auckland",children:"Auckland"}),(0,K.jsx)(C.Z,{value:"Wellington",children:"Wellington"}),(0,K.jsx)(C.Z,{value:"Dunedin",children:"Dunedin"}),(0,K.jsx)(C.Z,{value:"Christchurch",children:"Christchurch"}),(0,K.jsx)(C.Z,{value:"Queenstown",children:"Queenstown"})]})]})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,K.jsx)(f.Z,{fullWidth:!0,name:"license",label:"License",type:"text",id:"license",autoComplete:"new-license",defaultValue:q.license})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(f.Z,{fullWidth:!0,name:"specialities",label:"Specialities",type:"text",id:"specialities",autoComplete:"specialities",multiline:!0,rows:2,defaultValue:q.specialities})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(f.Z,{fullWidth:!0,name:"availability",label:"Availability",type:"text",id:"availability",autoComplete:"availability",multiline:!0,rows:2,defaultValue:q.availability})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(f.Z,{fullWidth:!0,name:"work_requirement",label:"Work Requirement",type:"text",id:"work_requirement",autoComplete:"work_requirement",placeholder:"Please book 2 weeks in advance",multiline:!0,rows:2,defaultValue:q.work_requirement})}),(0,K.jsx)(Z.ZP,{item:!0,xs:12,children:(0,K.jsx)(x.Z,{name:"Save Changes",type:"submit",style:{marginBottom:50},size:"sml"})})]})]})]})]})})]})]}):(0,K.jsxs)("div",{id:"card-page",children:[(0,K.jsx)("br",{}),(0,K.jsx)("br",{}),(0,K.jsx)(b.Z,{id:"cards",children:"Please sign in"})]})}},5474:function(e,l,t){e.exports=t.p+"static/media/profile-banner.09afd368db2ea3a3d6ff.png"}}]);
//# sourceMappingURL=372.39b6e840.chunk.js.map
"use strict";(self.webpackChunknz_vet_locum_network=self.webpackChunknz_vet_locum_network||[]).push([[372],{1723:function(e,l,s){s(2791);var t=s(9653),n=s(7052),i=s(930),a=s(184);l.Z=function(e){var l=e.show,s=e.handleClose,r=e.handleChanges,c=e.nameClose,d=e.nameOpen;return(0,a.jsx)("div",{children:(0,a.jsxs)(t.Z,{centered:!0,show:l,onHide:s,children:[(0,a.jsx)(t.Z.Header,{closeButton:!0,children:(0,a.jsx)(t.Z.Title,{children:e.title})}),(0,a.jsx)(t.Z.Body,{children:e.text}),(0,a.jsxs)(t.Z.Footer,{children:[(0,a.jsx)(n.Z,{onClick:s,name:c}),(0,a.jsx)(i.Z,{onClick:r,name:d,size:"sml"})]})]})})}},5372:function(e,l,s){s.r(l),s.d(l,{default:function(){return W}});var t=s(4165),n=s(5861),i=s(9439),a=s(2791),r=s(7107),c=s(7012),d=s(2187),o=s(7689),u=s(6983),m=s(5474),h=s(8804),x=s(930),p=s(7052),j=s(4708),f=s(7391),Z=s(1889),g=s(4554),y=s(1614),w=s(2388),b=s(1723),v=s(1054),P=s(2144),k=s(4925),_=s(9891),C=s(9694),T=s(8096),N=s(184),K=(0,r.Z)();function W(){var e=a.useRef(),l=(0,o.s0)(),s=(0,a.useContext)(d.D),r=s.user,W=s.setUser,D=(0,a.useContext)(d.D),S=D.currentUserInfo,q=D.setCurrentUserInfo,z=a.useState(!1),V=(0,i.Z)(z,2),F=V[0],A=V[1],I=(0,a.useState)(!1),U=(0,i.Z)(I,2),Y=U[0],E=U[1],H=function(){return E(!0)},R=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(s){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.prev=1,e.next=4,w.Z.delete("https://nz-locum-backend.herokuapp.com/delete/".concat(r._id));case 4:localStorage.clear(),q({}),l("/"),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(l){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));if(e){W(e);var l=function(){var l=(0,n.Z)((0,t.Z)().mark((function l(){var s;return(0,t.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,w.Z.get("https://nz-locum-backend.herokuapp.com/doctors/search/".concat(e._id));case 2:s=l.sent,q(s.data.currentUserInfo[0]),console.log(s.data.currentUserInfo[0]);case 5:case"end":return l.stop()}}),l)})));return function(){return l.apply(this,arguments)}}();l()}}),[]);var B=(0,a.useState)(null),L=(0,i.Z)(B,2),O=L[0],M=L[1];return r&&S?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(u.Z,{maoriTitle:"T\u014d K\u014dtaha",englishTitle:"Your Profile",background:m}),(0,N.jsxs)("section",{children:[(0,N.jsx)(h.L5,{className:"py-5",children:(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{lg:"4",children:(0,N.jsx)(h.Yl,{className:"mb-4",children:(0,N.jsxs)(h.H7,{className:"text-center",children:[(0,N.jsx)(h.PH,{src:"https://nz-locum-backend.herokuapp.com/images/".concat(S.imageKey),alt:"avatar",className:"rounded",style:{width:"200px",height:"200px",objectFit:"cover"},fluid:!0}),(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsxs)("h3",{children:["Dr. ",S.first_name," ",S.last_name]}),(0,N.jsxs)("p",{className:"text-muted mb-4",children:[S.city,", New Zealand"]})]})})}),(0,N.jsxs)(h.TK,{lg:"8",children:[(0,N.jsx)(h.Yl,{className:"mb-4",children:(0,N.jsxs)(h.H7,{children:[(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{sm:"3",children:(0,N.jsx)(h.Pp,{children:"Full Name"})}),(0,N.jsx)(h.TK,{sm:"9",children:(0,N.jsxs)(h.Pp,{className:"text-muted",children:[S.first_name," ",S.last_name]})})]}),(0,N.jsx)("hr",{}),(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{sm:"3",children:(0,N.jsx)(h.Pp,{children:"Email"})}),(0,N.jsx)(h.TK,{sm:"9",children:(0,N.jsx)(h.Pp,{className:"text-muted",children:S.email})})]}),(0,N.jsx)("hr",{}),(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{sm:"3",children:(0,N.jsx)(h.Pp,{children:"Phone"})}),(0,N.jsx)(h.TK,{sm:"9",children:(0,N.jsx)(h.Pp,{className:"text-muted",children:S.phone})})]}),(0,N.jsx)("hr",{}),(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{sm:"3",children:(0,N.jsx)(h.Pp,{children:"Specialities"})}),(0,N.jsx)(h.TK,{sm:"9",children:(0,N.jsx)(h.Pp,{className:"text-muted",children:S.specialities})})]}),(0,N.jsx)("hr",{}),(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{sm:"3",children:(0,N.jsx)(h.Pp,{children:"License"})}),(0,N.jsx)(h.TK,{sm:"9",children:(0,N.jsx)(h.Pp,{className:"text-muted",children:S.license})})]}),(0,N.jsx)("hr",{}),(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{sm:"3",children:(0,N.jsx)(h.Pp,{children:"Availability"})}),(0,N.jsx)(h.TK,{sm:"9",children:(0,N.jsx)(h.Pp,{className:"text-muted",children:S.availability})})]}),(0,N.jsx)("hr",{}),(0,N.jsxs)(h.uZ,{children:[(0,N.jsx)(h.TK,{sm:"3",children:(0,N.jsx)(h.Pp,{children:"Work Requirement"})}),(0,N.jsx)(h.TK,{sm:"9",children:(0,N.jsx)(h.Pp,{className:"text-muted",children:S.work_requirement})})]})]})}),(0,N.jsx)(x.Z,{name:"Edit Details",style:{marginRight:30},onClick:function(){A(!F)},size:"sml"}),(0,N.jsx)(p.Z,{name:"Delete Profile",style:{marginRight:30},onClick:function(){return H()},size:"sml"}),(0,N.jsx)(b.Z,{show:Y,handleClose:function(){return E(!1)},handleShow:H,handleChanges:R,nameClose:"Cancel",nameOpen:"Delete Profile",title:"We are sad to see you go! \ud83d\ude14",text:"Are you sure you want to delete your profile? You can not undo this action"})]})]})}),F&&(0,N.jsx)(c.Z,{theme:K,children:(0,N.jsxs)(y.Z,{component:"main",children:[(0,N.jsx)(j.ZP,{}),(0,N.jsxs)(g.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"left",textAlign:"left"},children:[(0,N.jsx)("h3",{children:"Edit Your Details"}),(0,N.jsxs)(g.Z,{component:"form",noValidate:!0,onSubmit:function(l){l.preventDefault(),M(null);var s=new FormData(l.currentTarget),t=null==s.get("first_name")?S.first_name:s.get("first_name"),n=null==s.get("last_name")?S.last_name:s.get("last_name"),i=null==s.get("email")?S.email:s.get("email"),a=null==s.get("password")?S.password:s.get("password"),c=null==s.get("specialities")?S.specialities:s.get("specialities"),d=null==s.get("phone")?S.phone:s.get("phone"),o=null==s.get("city")?S.city:s.get("city"),u=null==s.get("license")?S.license:s.get("license"),m=null==s.get("availability")?S.availability:s.get("availability"),h=null==s.get("work_requirement")?S.work_requirement:s.get("work_requirement"),x=null==e.current.files[0]?S.imageKey:e.current.files[0],p=new FormData;p.append("first_name",t),p.append("last_name",n),p.append("email",i),p.append("password",a),p.append("specialities",c),p.append("phone",d),p.append("city",o),p.append("license",u),p.append("availability",m),p.append("work_requirement",h),p.append("imageKey",x),console.log("uploading");try{fetch("https://nz-locum-backend.herokuapp.com/doctors/update/".concat(r._id),{method:"POST",body:p}).then((function(){window.location.reload()})).catch((function(e){return M(e)}))}catch(O){console.log(O.msg)}},sx:{mt:3},children:[O?(0,N.jsx)("h1",{children:O.toString()}):null,(0,N.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(P.Z,{children:(0,N.jsxs)("div",{id:"cards",children:[(0,N.jsx)("input",{ref:e,type:"file"}),(0,N.jsx)("div",{className:"small text-muted mt-2",children:"Upload your profile picture. Max file size 5 MB"})]})})}),(0,N.jsx)("br",{}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,N.jsx)(f.Z,{autoComplete:"first_name",name:"first_name",fullWidth:!0,id:"first_name",label:"First Name",autoFocus:!0,defaultValue:S.first_name})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,N.jsx)(f.Z,{fullWidth:!0,id:"last_name",label:"Last Name",name:"last_name",autoComplete:"family-name",defaultValue:S.last_name})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",defaultValue:S.email})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",placeholder:"Your password"})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{fullWidth:!0,name:"phone",label:"Phone",type:"number",id:"phone",autoComplete:"new-phone",defaultValue:S.phone})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,N.jsxs)(T.Z,{fullWidth:!0,children:[(0,N.jsx)(k.Z,{id:"city",children:"City*"}),(0,N.jsxs)(C.Z,{labelId:"city",id:"city",name:"city",label:"City",required:!0,defaultValue:S.city,children:[(0,N.jsx)(_.Z,{value:"Northland",children:"Northland"}),(0,N.jsx)(_.Z,{value:"Auckland",children:"Auckland"}),(0,N.jsx)(_.Z,{value:"Wellington",children:"Wellington"}),(0,N.jsx)(_.Z,{value:"Dunedin",children:"Dunedin"}),(0,N.jsx)(_.Z,{value:"Christchurch",children:"Christchurch"}),(0,N.jsx)(_.Z,{value:"Queenstown",children:"Queenstown"})]})]})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,N.jsx)(f.Z,{fullWidth:!0,name:"license",label:"License",type:"text",id:"license",autoComplete:"new-license",defaultValue:S.license})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{fullWidth:!0,name:"specialities",label:"Specialities",type:"text",id:"specialities",autoComplete:"specialities",multiline:!0,rows:2,defaultValue:S.specialities})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{fullWidth:!0,name:"availability",label:"Availability",type:"text",id:"availability",autoComplete:"availability",multiline:!0,rows:2,defaultValue:S.availability})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(f.Z,{fullWidth:!0,name:"work_requirement",label:"Work Requirement",type:"text",id:"work_requirement",autoComplete:"work_requirement",placeholder:"Please book 2 weeks in advance",multiline:!0,rows:2,defaultValue:S.work_requirement})}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,children:(0,N.jsx)(x.Z,{name:"Save Changes",type:"submit",style:{marginBottom:50},size:"sml"})})]})]})]})]})})]})]}):(0,N.jsxs)("div",{id:"card-page",children:[(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),(0,N.jsx)(v.Z,{id:"cards",children:"Please sign in"})]})}},5474:function(e,l,s){e.exports=s.p+"static/media/profile-banner.09afd368db2ea3a3d6ff.png"}}]);
//# sourceMappingURL=372.33bc29bc.chunk.js.map